# Топорков Евгений 04-23

**Feed Da Sunfish**

**Цель:** потренироваться в работе с `axios`, асинхронностью, обработкой ошибок и явным DOM API.

**Ключевые принципы:**

- **Модули:** `import` / `export` (используется `type: "module"` в `package.json`).
- **DOM-only view:** современные DOM-API (`createElement`, `append`, `prepend`, `replaceChildren`, `classList`, `dataset`).
- **MVC:** отдельные слои для модели, представления и контроллера.

**Структура проекта (важные файлы):**

- `src/main.js`: инициализация приложения.
- `src/model.js`: функция `feedFish()` — использует `axios` для запроса `/feed` и нормализует ответ.
- `src/view.js`: управление DOM — отрисовка лица рыбы, кнопки, шкалы сытости и сообщений.
- `src/controller.js`: логика взаимодействия — обработка кликов, блокировка кнопки, вызов `feedFish()` и обновление view.
- `server/index.js`: локальный dev-сервер (Express) — отдаёт `public/`, `src/` и реализует endpoint `/feed` с рандомными ответами.
- `__tests__/feed.model.test.js`: jest-тесты для `feedFish()` (мокаем `axios`).

**Как запустить**

1. Установите зависимости:

```bash
npm install
```

2. Запустите dev-сервер:

```bash
npm start
# затем открыть http://localhost:5500
```

**Доступные скрипты**

- `npm start` — запускает `server/index.js` (static + `/feed`).
- `npm test` — запускает `jest` (тесты модели в `__tests__`).
- `npm run test:node` — запускает старые node-скрипты (`node --test`) — существуют тесты, которые используют root `model.js`/`controller.js`.

**Задачи (5 шагов)**

1. Модель — `src/model.js`

- Реализовать `feedFish()` через `axios` и вернуть нормализованный объект `{ status, ok, body }`.

2. View — `src/view.js` (чистый DOM)

- Использовать современные DOM-API: `append`, `prepend`, `replaceChildren`, `classList`, `dataset`.
- Отрисовать морду санфиша, кнопку «Кормить», шкалу сытости и поле сообщений.
- View не содержит бизнес-логики — только методы для обновления состояний: `setEmotion`, `setSatiation`, `setMessage`, `setDisabled`.

3. Controller — `src/controller.js`

- Подписаться на клик кнопки, вызывать `feedFish()`, блокировать кнопку во время запроса и обновлять view по результату.
- Обработать все статусы (200 → happy; 429 → overfed; 500 → screaming) и сетевые ошибки.

4. Пользовательский опыт и асинхронность

- При запросе показывать текст загрузки (например, «Ждём пока эта рыба жуёт...»).
- Реализовать аккуратную обработку 429 (показать подсказку, не ломать UI). Опционально: реализовать retry с экспоненциальной задержкой для 429.

Каждую задачу выполняйте по отдельному коммиту и проверяйте тесты на шаге 1.
